/* Cache bust v2.2.10 - Fixed button rendering in bottom navigation */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap');
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer utilities {
  .hover\:scale-102:hover {
    transform: scale(1.02);
  }
  
  /* Theme-aware background utilities */
  .bg-theme-primary {
    background-color: rgb(var(--bg-primary));
  }
  
  .bg-theme-secondary {
    background-color: rgb(var(--bg-secondary));
  }
  
  .bg-theme-tertiary {
    background-color: rgb(var(--bg-tertiary));
  }
  
  .bg-theme-elevated {
    background-color: rgb(var(--bg-elevated));
  }
  
  .bg-theme-card {
    background-color: rgb(var(--card-bg));
  }
  
  /* Theme-aware text utilities */
  .text-theme-primary {
    color: rgb(var(--text-primary));
  }
  
  .text-theme-secondary {
    color: rgb(var(--text-secondary));
  }
  
  .text-theme-tertiary {
    color: rgb(var(--text-tertiary));
  }
  
  /* Theme-aware border utilities */
  .border-theme-primary {
    border-color: rgb(var(--border-primary));
  }
  
  .border-theme-secondary {
    border-color: rgb(var(--border-secondary));
  }
  
  /* Theme-aware hover utilities */
  .hover\:bg-theme-hover:hover {
    background-color: rgb(var(--card-hover));
  }
  
  /* Theme-aware menu utilities */
  .bg-menu {
    background-color: rgb(var(--menu-bg));
  }
  
  .bg-menu-overlay {
    background-color: rgba(var(--menu-overlay));
  }
  
  .border-menu {
    border-color: rgb(var(--menu-border));
  }
  
  .text-menu {
    color: rgb(var(--menu-text));
  }
  
  .text-menu-secondary {
    color: rgb(var(--menu-text-secondary));
  }
  
  /* Modal scroll locking */
  body.modal-open {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    width: 100% !important;
    height: 100% !important;
    overflow: hidden !important;
    touch-action: none !important;
  }
  
  html.modal-open {
    overflow: hidden !important;
  }
  
  /* iPhone-style slide-up animation */
  @keyframes slideUp {
    from {
      transform: translateY(100%);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }
  
  /* iPhone-style slide-down animation */
  @keyframes slideDown {
    from {
      transform: translateY(0);
      opacity: 1;
    }
    to {
      transform: translateY(100%);
      opacity: 0;
    }
  }
  
  /* Slide up from bottom animation */
  @keyframes slideUpFromBottom {
    from {
      transform: translateY(100%);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }
  
  .animate-slide-up {
    animation: slideUp 0.3s ease-out;
  }
  
  .animate-slide-down {
    animation: slideDown 0.3s ease-out;
  }
  
  /* Touch optimization */
  .touch-manipulation {
    touch-action: manipulation;
  }
  
  /* Prevent text and image selection on mobile */
  .no-select {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    -webkit-touch-callout: none;
    -webkit-tap-highlight-color: transparent;
  }
}

@layer base {
  /* CSS Variables for theme colors */
  :root {
    /* Light mode (default) - refined palette like the image */
    --bg-primary: 248, 248, 248;      /* #F8F8F8 - very light gray background */
    --bg-secondary: 255, 255, 255;    /* white - elevated surfaces */
    --bg-tertiary: 245, 245, 245;     /* #F5F5F5 - subtle gray */
    --bg-elevated: 255, 255, 255;     /* white - cards and elevated elements */
    --bg-nav: 255, 255, 255;          /* white - navigation */
    --bg-sidebar: 248, 248, 248;      /* #F8F8F8 - sidebar matches main bg */
    
    --text-primary: 75, 85, 99;       /* #4B5563 - gray-600 for main text */
    --text-secondary: 17, 24, 39;     /* #111827 - gray-900 for darker text */
    --text-tertiary: 156, 163, 175;   /* #9CA3AF - gray-400 for placeholders */
    
    --border-primary: 156, 163, 175;  /* #9CA3AF - more visible gray borders */
    --border-secondary: 209, 213, 219; /* #D1D5DB - light borders */
    
    --input-bg: 255, 255, 255;        /* white - input backgrounds */
    --input-border: 229, 231, 235;    /* #E5E7EB - gray-200 borders */
    
    --card-bg: 255, 255, 255;         /* white - card backgrounds */
    --card-border: 156, 163, 175;     /* #9CA3AF - more visible gray borders */
    --card-hover: 249, 250, 251;      /* #F9FAFB - subtle hover state */
    
    /* Menu theme variables for light mode */
    --menu-bg: 255, 255, 255;         /* white - menu backgrounds */
    --menu-overlay: 0, 0, 0, 0.6;     /* black with opacity - overlay */
    --menu-border: 209, 213, 219;     /* #D1D5DB - menu borders */
    --menu-text: 17, 24, 39;          /* #111827 - menu text */
    --menu-text-secondary: 75, 85, 99; /* #4B5563 - secondary menu text */
  }
  
  [data-theme="dark"] {
    --bg-primary: 17, 24, 39;         /* gray-900 */
    --bg-secondary: 31, 41, 55;       /* gray-800 */
    --bg-tertiary: 55, 65, 81;        /* gray-700 */
    --bg-elevated: 31, 41, 55;        /* gray-800 */
    --bg-nav: 3, 7, 18;               /* gray-950 */
    --bg-sidebar: 3, 7, 18;           /* gray-950 */
    
    --text-primary: 255, 255, 255;    /* white */
    --text-secondary: 156, 163, 175;  /* gray-400 */
    --text-tertiary: 107, 114, 128;   /* gray-500 */
    
    --border-primary: 55, 65, 81;     /* gray-700 */
    --border-secondary: 31, 41, 55;   /* gray-800 */
    
    --input-bg: 31, 41, 55;           /* gray-800 */
    --input-border: 55, 65, 81;       /* gray-700 */
    
    --card-bg: 31, 41, 55;            /* gray-800 */
    --card-border: 55, 65, 81;        /* gray-700 */
    --card-hover: 55, 65, 81;         /* gray-700 */
    
    /* Menu theme variables for dark mode */
    --menu-bg: 17, 24, 39;            /* gray-900 - menu backgrounds */
    --menu-overlay: 0, 0, 0, 0.6;     /* black with opacity - overlay */
    --menu-border: 55, 65, 81;        /* #374151 - menu borders */
    --menu-text: 255, 255, 255;       /* white - menu text */
    --menu-text-secondary: 156, 163, 175; /* #9CA3AF - secondary menu text */
  }
  
  [data-theme="darker"] {
    --bg-primary: 0, 0, 0;            /* black */
    --bg-secondary: 17, 24, 39;       /* gray-900 */
    --bg-tertiary: 31, 41, 55;        /* gray-800 */
    --bg-elevated: 17, 24, 39;        /* gray-900 */
    --bg-nav: 0, 0, 0;                /* black */
    --bg-sidebar: 0, 0, 0;            /* black */
    
    --text-primary: 243, 244, 246;    /* gray-100 */
    --text-secondary: 156, 163, 175;  /* gray-400 */
    --text-tertiary: 107, 114, 128;   /* gray-500 */
    
    --border-primary: 31, 41, 55;     /* gray-800 */
    --border-secondary: 17, 24, 39;   /* gray-900 */
    
    --input-bg: 17, 24, 39;           /* gray-900 */
    --input-border: 31, 41, 55;       /* gray-800 */
    
    --card-bg: 17, 24, 39;            /* gray-900 */
    --card-border: 31, 41, 55;        /* gray-800 */
    --card-hover: 31, 41, 55;         /* gray-800 */
    
    /* Menu theme variables for darker mode */
    --menu-bg: 0, 0, 0;               /* black - menu backgrounds */
    --menu-overlay: 0, 0, 0, 0.8;     /* black with higher opacity - overlay */
    --menu-border: 31, 41, 55;        /* #1F2937 - menu borders */
    --menu-text: 243, 244, 246;       /* #F3F4F6 - menu text */
    --menu-text-secondary: 156, 163, 175; /* #9CA3AF - secondary menu text */
  }

  html {
    font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'SF Pro Text', 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;
    font-weight: 200;
    background-color: rgb(var(--bg-primary));
    margin: 0;
    padding: 0;
    overflow: hidden; /* Prevent html scroll - app container handles it */
  }
  
  /* Prevent text and image selection on mobile devices */
  @media (max-width: 768px) {
    * {
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      -webkit-touch-callout: none;
      -webkit-tap-highlight-color: transparent;
    }
    
    /* Allow selection in input fields and textareas */
    input, textarea, [contenteditable] {
      -webkit-user-select: text;
      -moz-user-select: text;
      -ms-user-select: text;
      user-select: text;
      -webkit-touch-callout: default;
    }
  }
  
  body {
    font-weight: 200;
    background-color: rgb(var(--bg-primary));
    color: rgb(var(--text-primary));
    margin: 0;
    padding: 0;
    overflow: hidden; /* Prevent body scroll - app container handles it */
  }
  
  /* Make all text elements use thin font by default */
  h1, h2, h3, h4, h5, h6, p, span, div, button, input, textarea, select {
    font-weight: 200;
  }
  
  /* Override for specific elements that need more weight */
  .font-medium {
    font-weight: 300;
  }
  
  .font-semibold {
    font-weight: 400;
  }
  
  .font-bold {
    font-weight: 500;
  }
}

@layer components {
  /* iPhone-style app container */
  .app-container {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    display: flex;
    flex-direction: column;
    background-color: rgb(var(--bg-primary));
    overflow: hidden;
  }

  /* Main content area - takes up space above bottom nav */
  .main-content {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    -webkit-overflow-scrolling: touch;
    padding-bottom: 80px; /* Space for bottom navigation */
    background-color: rgb(var(--bg-primary));
  }

  /* iPhone-style bottom navigation */
  .bottom-nav-fixed {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    height: 80px;
    background-color: rgb(var(--bg-nav));
    border-top: 1px solid rgb(var(--border-primary));
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: space-around;
    /* Ensure it never moves */
    transform: none;
    -webkit-transform: none;
    /* Prevent any movement or scrolling */
    position: fixed !important;
    will-change: auto;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
  }

  /* Modal overlay fixes - must be higher than bottom navigation */
  .modal-overlay {
    z-index: 10000 !important;
  }

  /* Bottom navigation will be replaced with custom buttons when modal is open */

  /* Additional scroll lock for modals */
  body.modal-open {
    position: fixed !important;
    width: 100% !important;
    overflow: hidden !important;
    overflow-y: hidden !important;
    overflow-x: hidden !important;
    touch-action: none !important;
    -webkit-overflow-scrolling: touch !important;
  }

  /* Prevent any scrollable elements from moving */
  body.modal-open .main-content {
    overflow: hidden !important;
    -webkit-overflow-scrolling: touch !important;
    pointer-events: none !important;
    touch-action: none !important;
  }

  /* Allow interaction with modal/menu elements */
  body.modal-open .modal-overlay,
  body.modal-open [data-menu],
  body.modal-open .cart-menu,
  body.modal-open .slide-up-menu {
    pointer-events: auto !important;
    touch-action: auto !important;
  }

  /* Ensure bulk selector is above bottom navigation on mobile */
  @media (max-width: 1023px) {
    .modal-overlay {
      z-index: 10001 !important;
    }
  }

  /* PWA-specific fixes */
  @media (display-mode: standalone) {
    .app-container {
      /* PWA mode - ensure full viewport coverage */
      height: 100vh;
      height: 100dvh; /* Dynamic viewport height for mobile */
    }
    
    .bottom-nav-fixed {
      /* PWA mode - ensure safe area support */
      padding-bottom: env(safe-area-inset-bottom);
    }
  }
  
  /* Mobile-specific fixes */
  @media (max-width: 768px) {
    .app-container {
      /* Mobile - ensure proper height */
      height: 100vh;
      height: 100dvh;
    }
    
    .main-content {
      /* Mobile - ensure proper scrolling */
      -webkit-overflow-scrolling: touch;
    }
    
    /* Prevent selection on card elements and images */
    .card, img, [data-card], .pokemon-card, .expansion-card, .game-card {
      -webkit-user-select: none !important;
      -moz-user-select: none !important;
      -ms-user-select: none !important;
      user-select: none !important;
      -webkit-touch-callout: none !important;
      -webkit-tap-highlight-color: transparent !important;
    }
  }

  /* Desktop-specific styles */
  .desktop-app-container {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    display: flex;
    background-color: rgb(var(--bg-primary));
    overflow: hidden;
  }

  .desktop-sidebar {
    position: relative;
    height: 100vh;
    flex-shrink: 0;
    background-color: rgb(var(--bg-sidebar));
    border-right: 1px solid rgb(var(--border-primary));
    z-index: 1000;
    display: flex;
    flex-direction: column;
    box-shadow: 4px 0 20px rgba(0, 0, 0, 0.1);
  }

  .desktop-main-content {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    background-color: rgb(var(--bg-primary));
    padding: 2rem;
    /* Desktop-optimized padding */
    padding-bottom: 2rem;
    transition: all 0.3s ease;
  }

  /* Sidebar state classes */
  .desktop-main-content.sidebar-expanded {
    margin-left: 0;
  }

  .desktop-main-content.sidebar-collapsed {
    margin-left: 0;
  }

  /* Desktop-specific content improvements */
  @media (min-width: 1024px) {
    .desktop-main-content {
      padding: 3rem 4rem;
    }
    
    .desktop-main-content.sidebar-expanded {
      margin-left: 0;
    }
    
    .desktop-main-content.sidebar-collapsed {
      margin-left: 0;
    }
  }

  @media (min-width: 1440px) {
    .desktop-main-content {
      padding: 4rem 6rem;
    }
  }

  /* Hide scrollbars for mobile app-like experience */
  * {
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* Internet Explorer 10+ */
  }
  
  *::-webkit-scrollbar {
    display: none; /* Webkit browsers */
  }

  /* Line clamp utilities */
  .line-clamp-1 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 1;
  }
  
  .line-clamp-2 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2;
  }
  
  .line-clamp-3 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 3;
  }
}

/* Fix date input sizing on mobile */
input[type="date"] {
  min-width: 0 !important;
  max-width: 100% !important;
  box-sizing: border-box !important;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
}

/* Ensure date inputs don't cause horizontal scroll */
input[type="date"]::-webkit-calendar-picker-indicator {
  width: 16px;
  height: 16px;
}